
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de Telegrama Ley 23.789</title>
    <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; max-width: 600px; }
        input, textarea, button { width: 100%; margin: 8px 0; padding: 8px; }
        label { font-weight: bold; display: block; margin-top: 10px; }
    </style>
</head>
<body>
    <h2>Generador de Telegrama Laboral</h2>
    <label>Nombre del Remitente:</label>
    <input type="text" id="remitente" value="Juan Pérez">
    <label>DNI:</label>
    <input type="text" id="dni" value="30.123.456">
    <label>Domicilio del Remitente:</label>
    <input type="text" id="domicilioRemitente" value="Av. Siempre Viva 123">

    <label>Nombre del Destinatario:</label>
    <input type="text" id="destinatario" value="Acme S.A.">
    <label>Domicilio Laboral:</label>
    <input type="text" id="domicilioLaboral" value="Calle Falsa 456">
    <label>Localidad y Provincia:</label>
    <input type="text" id="localidadProvincia" value="Salta, Salta">

    <label>Fecha:</label>
    <input type="text" id="fecha" value="09/07/2025">
    <label>Texto del Telegrama:</label>
    <textarea id="texto" rows="5">Intimo en los términos del art. 57 LCT que regularice mi situación registral en un plazo de 48 hs bajo apercibimiento de considerarme despedido.</textarea>

    <button onclick="generarPDF()">Generar PDF</button>

    <script>
        async function generarPDF() {
            const { PDFDocument, rgb } = PDFLib;
            const pdfDoc = await PDFDocument.create();
            const page = pdfDoc.addPage([595.28, 841.89]); // A4

            const imgUrl = 'telegrama_fondo.jpg';
            const imgBytes = await fetch(imgUrl).then(res => res.arrayBuffer());
            const jpgImage = await pdfDoc.embedJpg(imgBytes);
            const jpgDims = jpgImage.scale(1);
            page.drawImage(jpgImage, {
                x: 0,
                y: 0,
                width: jpgDims.width,
                height: jpgDims.height,
            });

            const remitente = document.getElementById('remitente').value;
            const dni = document.getElementById('dni').value;
            const domicilioRem = document.getElementById('domicilioRemitente').value;
            const destinatario = document.getElementById('destinatario').value;
            const domicilioLab = document.getElementById('domicilioLaboral').value;
            const localidadProv = document.getElementById('localidadProvincia').value;
            const fecha = document.getElementById('fecha').value;
            const texto = document.getElementById('texto').value;

            const fontSize = 10;
            page.drawText(destinatario, { x: 70, y: 720, size: fontSize, color: rgb(0,0,0) });
            page.drawText(domicilioLab, { x: 70, y: 705, size: fontSize, color: rgb(0,0,0) });
            page.drawText(localidadProv, { x: 70, y: 690, size: fontSize, color: rgb(0,0,0) });

            page.drawText(remitente, { x: 370, y: 720, size: fontSize, color: rgb(0,0,0) });
            page.drawText("DNI: " + dni, { x: 370, y: 705, size: fontSize, color: rgb(0,0,0) });
            page.drawText(domicilioRem, { x: 370, y: 690, size: fontSize, color: rgb(0,0,0) });

            page.drawText("Fecha: " + fecha, { x: 70, y: 80, size: fontSize, color: rgb(0,0,0) });

            const lines = texto.split("\n");
            let y = 550;
            for (let i = 0; i < lines.length; i++) {
                page.drawText(lines[i], { x: 70, y: y, size: fontSize, color: rgb(0,0,0) });
                y -= 14;
            }

            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'telegrama_laboral.pdf';
            link.click();
        }
    </script>
</body>
</html>
